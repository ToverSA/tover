app.controller("accountCtl",["$scope","$http","$location","AppStore",function(e,t,a,n){"use strict";function r(){n.isToken()?e.accountState=s.MAIN:(t.get("/api/campuses.json",{cache:!0}).then(function(t){s.insties=t.data,e.instList=s.insties}),e.accountState=s.LOGIN)}function o(t){return"undefined"==typeof t||t.length<4?(e.errMsg="Name must have at least 4 characters",!1):t.search(/[a-z]/i)<0?(e.errMsg="Your name must contain at least one letter.",!1):!0}function i(e){var t=/\S+@\S+\.\S+/;return t.test(e)}function c(t){return"undefined"==typeof t||t.length<4?(e.errMsg="Password must have at least 4 characters",!1):t.search(/[a-z]/i)<0?(e.errMsg="Your password must contain at least one letter.",!1):t.search(/[0-9]/)<0?(e.errMsg="Your password must contain at least one digit.",!1):t.equals===e.formData.rePwd?(e.errMsg="Passwords do not match",!1):!0}function u(t){return i(t.email)?c(t.password)?o(t.dName)?"undefined"!=typeof e.formData.campusId?(e.error(-1),!0):(e.error(3),void(e.errMsg="Campus isn't selected")):(e.error(1),!1):(e.error(2),!1):(e.error(0),!1)}function l(e,a){var n={email:e,password:a};t.post("api.php/v1/users/auth",$.param(n)).then(function(e){log(e.data)},function(e){})}var s=this;s.LOADING=0,s.LOGIN=1,s.REGISTER=2,s.RECOVERY=3,s.MAIN=4,s.CONSOLE=5,s.MESSAGES=6,s.PREFERENCES=7,s.FAQS=8,s.insties=[],e.error=function(t){switch(t){case 0:e.err=!0,e.errMsg="Error in email format i.e. '@'";break;case 1:e.err=!0;break;case 2:e.err=!0;break;case 3:e.err=!0;break;default:e.err=!1}},e.formData={email:"sdu@gum.com",password:"plo0",rePwd:"plo0",dName:"nkero",campusId:1},e.authData={},e.cState=0,e.lTitle="- Select your campus -",e.sTitle="",e.openChooser=function(){e.isCOpen=!0},e.browse=function(t){0===e.cState?(e.sTitle=s.insties[t].name,e.instList=s.insties[t].campuses,e.cState=1):(e.formData.campusId=e.instList[t].id,e.isCOpen=!1,e.lTitle=e.instList[t].name)},e.changeC=function(){e.instList=s.insties,e.cState=0},e.toRecovery=function(){e.accountState=s.RECOVERY},e.toRegister=function(){e.accountState=s.REGISTER},e.toLogin=function(){e.accountState=s.LOGIN},e.toLogin=function(){e.accountState=s.LOGIN},e.recover=function(){"undefined"==typeof e.recoveryMail?e.err=!0:(e.err=!1,t.post().then(function(e){}))},e.logIn=function(){"undefined"==typeof e.authData.email?(e.err=!0,e.errMsg="Email field is empty!"):"undefined"==typeof e.authData.password?(e.err=!0,e.errMsg="Password field is empty!"):(e.err=!1,l(e.authData.email,e.authData.password))},e.delAcc=function(){a.url("/account/delete")},e.faqs=function(){a.url("/faqs/account")},e.createAd=function(){a.url("/ads/create")},e.createNew=function(){u(e.formData);var a=JSON.parse(JSON.stringify(e.formData));delete a.rePwd,t.post("/api.php/v1/users/new",$.param(a)).then(function(e){l(a.email,a.password)},function(e){})},r()}]),app.controller("homeCtl",["$scope","$http","$location",function(e,t,a){"use strict";function n(){t.get("/api/ads.json").then(function(e){},function(e){log(e)})}e.title="Some demo text and more testimonial bitch",e.viewAd=function(e){a.url("/ads/"+e)},n()}]),app.controller("adsCreateCtl",["$scope","$location",function(e,t){"use strict";e.cat=!1,e.display="- Choose category - ",e.cats=[{id:1,name:"Books & Study Material"},{id:2,name:"Electronics & Gadgets"},{id:3,name:"Phones & Laptops"},{id:4,name:"Services & Other"}],e.cancelAd=function(){t.url("/account")},e.show=function(){e.cat=!0},e.sel=function(t){e.display=e.cats[t].name,e.cat=!1},e.back=function(){e.aPage-=1},e.step=function(){1===e.aPage?e.aPage+=1:2===e.aPage?e.aPage+=1:3===e.aPage&&t.url("/account")}}]),app.controller("adsCtl",["$scope","$timeout","$location",function(e,t,a){"use strict";e.isGuest=!0,e.sendMessage=function(){e.state=2,t(function(){e.state=-1},1e3)},e.reportAd=function(e){}}]),app.controller("adsSearchCtl",["$scope","$routeParams","$location",function(e,t,a){"use strict";t.hasOwnProperty("cat")&&(e.search=1,e.sSection=1),e.back=function(){e.search?a.url("/ads/search"):a.url("/home")},e.toCat=function(e){a.url("/ads/search/?cat="+e)},e.viewAd=function(e){a.url("/ads/"+e)}}]),app.controller("faqsCtl",["$scope","$routeParams",function(e,t){"use strict";log(t)}]),app.controller("delAccCtl",["$scope","$location",function(e,t){"use strict";e.cancel=function(){t.url("/account")},e.conf=function(){}}]),app.controller("landingCtl",["$scope","$http","AppStore","$location",function(e,t,a,n){"use strict";var s=[];t.get("/api/campuses.json").then(function(t){s=t.data;e.list=[],s.forEach(function(t){e.list.push(t)})},function(e){log(e)}),e.state=0,e.browse=function(t){0===e.state?(e.iName=s[t].name,e.list=[],s[t].campuses.forEach(function(t){e.list.push(t)}),e.state=1):(a.setCampus(e.list[t].id,e.list[t].name),n.url("/home"))},e.change=function(){e.state=0,e.list=[],s.forEach(function(t){e.list.push(t)})},e.getStarted=function(){a.isNew()?e.dialog=!0:n.url("/home")}}]),app.controller("notFoundCtl",[function(){"use strict"}]);
