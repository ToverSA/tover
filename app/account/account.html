<div header account="1"></div>
<div class="account" ng-switch="section">
    <div ng-switch-default></div>
    <div class="main" ng-switch-when="console" ng-controller="consoleCtl">
        <div class="header">
            <span class="label">{{name}}</span>
            <div class="item" ng-click="createAd()">
                <img src="img/add.png"/>
                <span>CREATE AD</span>
            </div>
            <div class="item" ng-click="toInbox()">
                <img src="img/envelope.png"/>
                <span>INBOX</span>
                <div class="color-accent" ng-show="notify > 0">{{notify}}</div>
            </div>
            <div class="item" ng-click="toPrefs()">
                <img src="img/settings-2.png"/>
                <span>PREFRENCES</span>
            </div>
            <div class="item" ng-click="logout()">
                <img src="img/logout.png"/>
                <span>LOG OUT</span>
            </div>
        </div>
        <h1 class="zero" ng-show="ads.length === 0">Nothing to see here. Create your first ad!</h1>
        <div class="ads-list" ng-hide="ads.length === 0">
            <div class="item heading">
                <span>Ad Title</span>
                <span>Price</span>
                <span>Date created</span>
                <span>Views</span>
            </div>
            <div class="item" ng-repeat="x in ads" a-ad ng-click="openAd(x.id)">
                <span>{{x.title}}</span>
                <span>{{x.price | currency:'R'}}</span>
                <span>{{x.date_created}}</span>
                <span>{{x.count}}</span>
            </div>
        </div>
    </div>
    <div class="login" ng-switch-when="login" ng-controller="loginCtl">
        <h2>Login to account</h2>
        <img src="img/avatar.png" alt="Account"/>
        <input type="text" placeholder="Email" ng-model="authData.email"/>
        <input type="password" placeholder="Password" ng-model="authData.password"/>
        <div>
            <span class="color-accent-inv" ng-click="toRecovery()">Fogort password?</span>
            <span class="color-accent" ng-click="logIn()">Log in</span>
        </div>
        <span class="color-accent-inv" ng-click="toRegister()">Create new account</span>
        <span ng-show="err" class="err">{{errMsg}}</span>
    </div>
    <div class="register" ng-switch-when="register" ng-controller="registerCtl">
        <h2>Register new account</h2>
        <input type="text" placeholder="Display name" ng-model="formData.dName"/>
        <input type="email" placeholder="Email" ng-model="formData.email"/>
        <input type="text" placeholder="Cellphone number" ng-model="formData.number"/>
        <div class="a-chooser">
            <span ng-click="openChooser()">{{lTitle}}</span>
            <div class="c-dialog" ng-show="isCOpen">
                <h4 ng-show="(cState === 1)">{{sTitle}} - <span ng-click="changeC()">Change</span></h4>
                <span ng-click="browse(instList.indexOf(x))" ng-repeat="x in instList">{{x.name}}</span>
            </div>
        </div>
        <input type="password" placeholder="Password" ng-model="formData.password"/>
        <input type="password" placeholder="Re-enter password" ng-model="formData.rePwd"/>
        <span class="color-accent" ng-click="createNew()">Create account</span>
        <span class="color-accent-inv" ng-click="toLogin()">Already have an account?</span>
        <span ng-show="err" class="err">{{errMsg}}</span>
    </div>
    <div class="recovery" ng-switch-when="recovery">
        <h1>Recover your account!</h1>
        <p>Enter your email address</p>
        <input ng-class="{err: err}" type="text" placeholder="Email" ng-model="recoveryMail"/>
        <span class="submit color-accent" ng-click="recover()">Submit</span>
        <h4 ng-class="{success: success}">An email to reset your password will be sent to you in a moment</h4>
        <span class="color-accent-inv" ng-click="toLogin()" class="back">Log in</span>
    </div>
    <div class="main" ng-switch-when="prefs" ng-controller="prefsCtl">
        <div class="header">
            <span class="label">Preferences</span>
            <div class="item" ng-click="save()" ng-show="dataChanged">
                <img src="img/correct.png"/>
                <span>SAVE</span>
            </div>
            <div class="item" ng-click="toCons()">
                <img src="img/avatar.png"/>
                <span>BACK</span>
            </div>
        </div>
        <div class="prefs">
            <div class="item">
                <span>Display name</span>
                <span class="color-accent-inv" ng-click="edit(1)">EDIT</span>
                <h2>{{current.name}}</h2>
            </div>
            <div class="item">
                <span>Number</span>
                <span class="color-accent-inv" ng-click="edit(2)">EDIT</span>
                <h2 ng-switch="current.w">{{current.number}}<img src="/img/whatsapp.png" ng-switch-when="0"/><img class="whatsapp" src="/img/whatsapp.png" ng-switch-when="1"/></h2>
            </div>
            <div class="item">
                <span>Account</span>
                <span class="color-accent-inv" ng-click="edit(3)">DELETE ACCOUNT</span>
                <h2>{{current.email}}</h2>
            </div>
            <div class="item">
                <span>Credits</span>
                <span class="color-accent-inv" ng-click="edit(4)">RECHARGE</span>
                <h2>{{credits}}</h2>
            </div>
        </div>
        <div ng-switch="editing">
            <div class="edit-dialog" ng-switch-when="1">
                <h4>Display name</h4>
                <input type="text" ng-model="data.name"/>
                <div class="btns">
                    <span class="color-accent-inv" ng-click="close()">CLOSE</span>
                </div>
            </div>
            <div class="edit-dialog" ng-switch-when="2">
                <h4>Number</h4>
                <input type="text" ng-model="data.number"/>
                <div>
                    <input name="w" type="checkbox" ng-model="data.w"/>
                    <label for="w">Available on whatsapp</label>
                </div>
                <div class="btns">
                    <span class="color-accent-inv" ng-click="close()">CLOSE</span>
                </div>
            </div>
            <div class="edit-dialog" ng-switch-when="3">
                <h4>Are you sure you want to delete this account and erase all adverts associated with it?</h4>
                <div>
                    <label>Confirm your password first.</label>
                    <input type="password" ng-model="pwd"/>
                </div>
                <div class="btns">
                    <span class="color-accent-inv" ng-click="close()">CANCEL</span>
                    <span class="color-accent" ng-click="del(pwd)">DELETE</span>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="loader" ng-show="loading">
    <div class="color-primary"></div>
    <div class="color-primary"></div>
</div>
<div class="error-dialog" ng-show="error.showing">
    <div class="container">
        <h2>{{error.title}}</h2>
        <p>{{error.description}}</p>
        <div class="btns">
            <span class="color-accent-inv" ng-click="closeErrDialog()">CLOSE</span>
        </div>
    </div>
</div>